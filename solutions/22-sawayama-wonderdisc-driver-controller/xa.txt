GRAB 300
COPY F X
DROP

LINK 800
NOTE WAIT FOR DISC
TEST M = 1

MARK NEXTDISC
REPL BUFFER
COPY #TRAK T
LINK 801
GRAB T

MARK COPYFILE
COPY F M
TEST EOF
FJMP COPYFILE
HALT

MARK BUFFER
LINK 800
MAKE
NOOP

MARK BUFFERLOOP
NOOP
TEST MRD
FJMP ENDBUFFER
COPY M F
SEEK -1
TEST F > X
FJMP BUFFERLOOP
TJMP REPLACEREGION

MARK REPLACEREGION
SEEK -1
COPY X F
JUMP BUFFERLOOP

MARK ENDBUFFER
DROP
LINK -1
JUMP NEXTDISC
